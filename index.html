<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Borneo Fresh Fruits | Premium</title>
    <style>
        /* --- TEMA PREMIUM --- */
        :root {
            --primary-dark: #0F5132;  
            --primary-light: #198754; 
            --accent: #FFC107;        
            --bg: #F3F4F6;            
            --card-bg: #FFFFFF;
            --text-main: #1F2937;
            --text-muted: #6B7280;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding-bottom: 100px; /* Ruang lebih untuk Cart Bar */
            -webkit-tap-highlight-color: transparent;
        }

        /* HERO SECTION */
        .hero {
            background-color: var(--primary-dark);
            color: white;
            padding: 30px 20px;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(15, 81, 50, 0.2);
        }

        .brand-name { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; color: rgba(255,255,255,0.7); margin-bottom: 10px; font-weight: bold; }
        .hero-title { font-size: 1.5rem; font-weight: 800; margin: 0 0 10px 0; line-height: 1.2; }
        .hero-desc { font-size: 0.9rem; opacity: 0.9; margin: 0; font-weight: 300; max-width: 500px; margin: 0 auto; }

        /* TRUST BAR */
        .trust-bar { display: flex; justify-content: center; gap: 15px; margin-top: -20px; padding: 0 15px; }
        .trust-badge { background: white; padding: 8px 15px; border-radius: 30px; font-size: 0.75rem; font-weight: bold; color: var(--primary-dark); box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 5px; }

        /* LIST PRODUK */
        .container { max-width: 600px; margin: 30px auto; padding: 0 15px; }
        .section-label { font-size: 0.9rem; font-weight: 700; color: var(--text-muted); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }

        /* KAD PRODUK */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .img-wrapper {
            width: 80px; height: 80px; border-radius: 8px; background-color: #eee; 
            flex-shrink: 0; overflow: hidden; display: flex; align-items: center; justify-content: center;
            color: #9ca3af; font-size: 0.6rem; text-align: center;
        }
        .card-img { width: 100%; height: 100%; object-fit: cover; }

        .card-info { padding-left: 15px; flex-grow: 1; }
        .p-name { font-weight: 700; font-size: 1rem; color: var(--text-main); margin-bottom: 4px; }
        .p-desc { font-size: 0.8rem; color: var(--text-muted); margin: 0; }

        .card-action { text-align: right; min-width: 80px; display: flex; flex-direction: column; align-items: flex-end; }
        .p-price { display: block; font-weight: 800; font-size: 1rem; color: var(--primary-dark); margin-bottom: 8px; }
        
        /* BUTANG TAMBAH (Style Baru) */
        .btn-add {
            background-color: white;
            color: var(--primary-light);
            border: 1px solid var(--primary-light);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-add:active { background-color: var(--primary-light); color: white; }

        /* FOOTER ADMIN */
        .footer { text-align: center; margin-top: 40px; color: #aaa; font-size: 0.75rem; }
        .admin-link { color: #ccc; text-decoration: none; border-bottom: 1px dotted #ccc; }

        /* --- CART BAR (Bar Bakul Terapung) --- */
        .cart-bar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 500px;
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            border-radius: 50px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            display: none; /* Mula-mula sorok */
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { bottom: -100px; } to { bottom: 20px; } }

        .cart-info { font-size: 0.9rem; font-weight: bold; }
        .cart-total { font-size: 0.8rem; opacity: 0.8; font-weight: normal; }
        
        .btn-checkout {
            background-color: #25D366; /* WhatsApp Green */
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .btn-checkout:active { transform: scale(0.95); }

    </style>
</head>
<body>

    <div class="hero">
        <div class="brand-name">Borneo Fresh Fruits</div>
        <div class="hero-title">Rasa Asli Borneo, Terus ke Pintu Anda.</div>
        <div class="hero-desc">Pakar pemborong buah-buahan tempatan Sabah. Segar dari ladang.</div>
    </div>

    <div class="trust-bar">
        <div class="trust-badge">âœ… Segar</div>
        <div class="trust-badge">ðŸš€ Pantas</div>
        <div class="trust-badge">ðŸ’Ž Murah</div>
    </div>

    <div class="container">
        <div class="section-label">Stok Terkini</div>
        <div id="product-list">
            <p style="text-align:center; padding:20px; color:#999;">Sedang memuatkan...</p>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2025 Borneo Fresh Fruits</p>
        <a href="admin.html" class="admin-link">Admin Login</a>
    </div>

    <div id="cart-bar" class="cart-bar">
        <div>
            <div class="cart-info"><span id="count">0</span> Item dipilih</div>
            <div class="cart-total">Total: RM <span id="total">0.00</span></div>
        </div>
        <button class="btn-checkout" onclick="checkoutWhatsapp()">
            WhatsApp âžœ
        </button>
    </div>

    <script>
        // 1. NOMBOR TELEFON TUAN
        const PHONE_NO = "60126119542"; 
        
        // 2. Variables
        let cart = []; // Simpan senarai barang yang dipilih
        const cartBar = document.getElementById('cart-bar');
        const countEl = document.getElementById('count');
        const totalEl = document.getElementById('total');

        // 3. Load Data dengan Anti-Cache
        var script = document.createElement('script');
        script.src = 'stok.js?v=' + new Date().getTime();
        document.body.appendChild(script);

        script.onload = function() { render(); };

        // 4. Paparkan Produk
        function render() {
            const listDiv = document.getElementById('product-list');
            if(typeof products === 'undefined' || products.length === 0) {
                listDiv.innerHTML = "<p style='text-align:center; padding:20px; color:#999;'>Tiada stok.</p>";
                return;
            }

            listDiv.innerHTML = products.map(p => {
                const hasImg = p.img && p.img.length > 10; 
                // Kita tukar butang kepada "addToCart"
                return `
                <div class="card">
                    <div class="img-wrapper">
                        ${hasImg ? `<img src="${p.img}" class="card-img" onerror="this.style.display='none';this.parentElement.innerText='Tiada'">` : 'Tiada<br>Gambar'}
                    </div>
                    
                    <div class="card-info">
                        <div class="p-name">${p.name}</div>
                        <div class="p-desc">${p.desc || 'Gred A'}</div>
                    </div>

                    <div class="card-action">
                        <span class="p-price">RM${p.price}</span>
                        <button class="btn-add" onclick="addToCart('${p.name}', ${p.price})">
                            + TAMBAH
                        </button>
                    </div>
                </div>
            `}).join('');
        }

        // 5. FUNGSI TAMBAH KE BAKUL
        function addToCart(name, price) {
            cart.push({ name, price }); // Masukkan dalam bakul
            updateCartBar();
            
            // Feedback getar sikit kalau guna handphone
            if(navigator.vibrate) navigator.vibrate(50);
        }

        // 6. UPDATE BAR BAWAH
        function updateCartBar() {
            const count = cart.length;
            const total = cart.reduce((sum, item) => sum + item.price, 0);

            countEl.innerText = count;
            totalEl.innerText = total.toFixed(2);

            if (count > 0) {
                cartBar.style.display = "flex"; // Tunjuk bar
            } else {
                cartBar.style.display = "none"; // Sorok bar
            }
        }

        // 7. FUNGSI GABUNG ORDER & HANTAR KE WHATSAPP
        function checkoutWhatsapp() {
            if (cart.length === 0) return;

            let message = "Salam Borneo Fresh, saya nak order:\n\n";
            
            // Gabungkan senarai
            // Kita kira kuantiti dulu (Contoh: Terap x2)
            let summary = {};
            cart.forEach(item => {
                summary[item.name] = (summary[item.name] || 0) + 1;
            });

            let grandTotal = 0;
            
            // Bina ayat
            for (let [name, qty] of Object.entries(summary)) {
                // Cari harga seunit balik
                let unitPrice = cart.find(i => i.name === name).price;
                let subtotal = unitPrice * qty;
                grandTotal += subtotal;

                message += `- ${name} (x${qty}) = RM${subtotal}\n`;
            }

            message += `\n*TOTAL: RM ${grandTotal.toFixed(2)}*`;
            message += `\n\nBoleh deliver ke mana?`;

            // Buka WhatsApp
            window.open(`https://wa.me/${PHONE_NO}?text=${encodeURIComponent(message)}`, '_blank');
        }
    </script>
</body>
</html>
